module.exports=[76472,a=>{"use strict";let b=(0,a.i(70106).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);a.s(["Heart",()=>b],76472)},45222,a=>{"use strict";let b=(0,a.i(70106).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);a.s(["MessageCircle",()=>b],45222)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},73320,16201,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>c],73320);let d=(0,b.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>d],16201)},89986,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(73320),f=a.i(33508),g=a.i(16201),h=a.i(53131);function i({isOpen:a,onClose:i,onUploadSuccess:j}){let{user:k}=(0,h.useAuth)(),[l,m]=(0,c.useState)(1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(!1),z=(0,c.useRef)(null);if(!a)return null;let A=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?o(!0):"dragleave"===a.type&&o(!1)},B=a=>{q(a);let b=new FileReader;b.onloadend=()=>{s(b.result),m(2)},b.readAsDataURL(a)},C=async()=>{if(!p||!t)return;y(!0);let a=new FormData;a.append("file",p),a.append("title",t),a.append("author",k?.username||"Anonymous"),a.append("userId",k?.id||"");try{(await fetch("/api/hypes",{method:"POST",body:a})).ok?(j(),D()):alert("Upload failed. Please try again.")}catch(a){console.error("Upload error:",a),alert("An error occurred during upload.")}finally{y(!1)}},D=()=>{m(1),q(null),s(null),u(""),w(""),y(!1),i()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white text-primary rounded-xl w-full max-w-4xl h-[80vh] flex flex-col shadow-2xl overflow-hidden relative border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:1===l?"Upload videos":`${t||"Draft"}`}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:D,className:"text-gray-500 hover:text-primary hover:bg-gray-100",children:(0,b.jsx)(f.X,{className:"w-6 h-6"})})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-0",children:1===l?(0,b.jsxs)("div",{className:`h-full flex flex-col items-center justify-center p-12 transition-colors ${n?"bg-gray-50":"bg-white"}`,onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:a=>{a.preventDefault(),a.stopPropagation(),o(!1),a.dataTransfer.files&&a.dataTransfer.files[0]&&B(a.dataTransfer.files[0])},children:[(0,b.jsx)("div",{className:"w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:(0,b.jsx)(e.Upload,{className:"w-16 h-16 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Drag and drop video files to upload"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mb-8",children:"Your videos will be private until you publish them."}),(0,b.jsx)(d.Button,{onClick:()=>z.current?.click(),className:"bg-primary hover:bg-primary/90 text-white font-bold px-6 py-2 rounded-sm uppercase text-sm",children:"Select Files"}),(0,b.jsx)("input",{ref:z,type:"file",className:"hidden",accept:"image/*,video/*",onChange:a=>{a.preventDefault(),a.target.files&&a.target.files[0]&&B(a.target.files[0])}})]}):(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row h-full",children:[(0,b.jsxs)("div",{className:"flex-1 p-8 space-y-6 overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Details"}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus-within:border-primary transition-colors",children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"Title (required)"}),(0,b.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value),className:"w-full bg-transparent border-none outline-none text-primary placeholder-gray-400",placeholder:"Add a title that describes your video"})]})}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus-within:border-primary transition-colors h-40",children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:v,onChange:a=>w(a.target.value),className:"w-full h-full bg-transparent border-none outline-none text-primary placeholder-gray-400 resize-none",placeholder:"Tell viewers about your video"})]})})]}),(0,b.jsxs)("div",{className:"w-full lg:w-1/3 bg-gray-50 p-6 border-l border-gray-200 flex flex-col",children:[(0,b.jsx)("div",{className:"aspect-9/16 bg-black rounded-lg overflow-hidden mb-4 relative shadow-md",children:r?p?.type.startsWith("video")?(0,b.jsx)("video",{src:r,controls:!0,className:"w-full h-full object-contain"}):(0,b.jsx)("img",{src:r,alt:"Preview",className:"w-full h-full object-contain"}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Generating preview..."})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,b.jsx)("span",{children:"Video Link"}),(0,b.jsx)("span",{className:"text-blue-600 cursor-pointer",children:"https://teenhut.com/v/..."})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,b.jsx)("span",{children:"Filename"}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:p?.name})]})]})]})]})}),2===l&&(0,b.jsxs)("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.CheckCircle,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Checks complete. No issues found."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",onClick:()=>m(1),className:"text-gray-600 hover:text-primary hover:bg-gray-200",children:"Back"}),(0,b.jsx)(d.Button,{onClick:C,disabled:x||!t,className:"bg-primary hover:bg-primary/90 text-white font-bold px-6 rounded-sm uppercase text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Uploading...":"Publish"})]})]})]})})}a.s(["default",()=>i])},53569,a=>{"use strict";let b=(0,a.i(70106).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);a.s(["Share2",()=>b],53569)},79360,a=>{"use strict";let b=(0,a.i(70106).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);a.s(["MoreVertical",()=>b],79360)},12439,52920,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);a.s(["Volume2",()=>c],12439);let d=(0,b.default)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);a.s(["VolumeX",()=>d],52920)},11430,a=>{"use strict";var b=a.i(87924),c=a.i(76472),d=a.i(45222),e=a.i(53569),f=a.i(79360);let g=(0,a.i(70106).default)("music-2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);var h=a.i(12439),i=a.i(52920),j=a.i(25015),k=a.i(40695),l=a.i(38246),m=a.i(72131),n=a.i(33508);function o({isOpen:a,onClose:c,hypeId:d,initialComments:e=[]}){let[f,g]=(0,m.useState)(e),[h,i]=(0,m.useState)(""),[j,l]=(0,m.useState)(!1),o=(0,m.useRef)(null);(0,m.useEffect)(()=>{a&&(p(),setTimeout(()=>o.current?.focus(),100))},[a,d]);let p=async()=>{try{let a=await fetch(`/api/hypes/${d}/comments`);if(a.ok){let b=await a.json();g(b)}}catch(a){console.error("Failed to fetch comments")}},q=async a=>{if(a.preventDefault(),h.trim()){l(!0);try{console.log("Posting comment to:",`/api/hypes/${d}/comment`);let a=await fetch(`/api/hypes/${d}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:h,author:"You"})});if(a.ok){let b=await a.json();g(a=>[b,...a]),i("")}else console.error("Failed to post comment, status:",a.status),alert("Failed to post comment. Please try again.")}catch(a){console.error("Failed to post comment:",a),alert("An error occurred. Please check your connection.")}finally{l(!1)}}};return a?(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:c}),(0,b.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-t-2xl sm:rounded-2xl h-[70vh] flex flex-col shadow-2xl animate-in slide-in-from-bottom duration-300",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center p-4 border-b border-gray-100 relative",children:[(0,b.jsx)("div",{className:"w-12 h-1 bg-gray-300 rounded-full absolute top-2"}),(0,b.jsx)("h3",{className:"font-bold text-primary mt-2",children:"Comments"}),(0,b.jsx)(k.Button,{variant:"ghost",size:"icon",className:"absolute right-2 top-2 text-gray-500 hover:text-primary",onClick:c,children:(0,b.jsx)(n.X,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===f.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm",children:[(0,b.jsx)("p",{children:"No comments yet."}),(0,b.jsx)("p",{children:"Start the conversation!"})]}):f.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-teal-400 to-blue-500 p-[2px] shrink-0",children:(0,b.jsx)("div",{className:"w-full h-full rounded-full bg-white flex items-center justify-center font-bold text-xs text-primary",children:a.author[0]})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"font-bold text-sm text-primary",children:a.author}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:new Date(a.createdAt).toLocaleDateString()})]}),(0,b.jsx)("p",{className:"text-sm text-gray-800",children:a.text})]})]},c))}),(0,b.jsx)("div",{className:"p-4 border-t border-gray-100 bg-white pb-6 sm:pb-4",children:(0,b.jsxs)("form",{onSubmit:q,className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-bold text-xs text-gray-500 shrink-0",children:"Y"}),(0,b.jsx)("input",{ref:o,type:"text",value:h,onChange:a=>i(a.target.value),placeholder:"Add a comment...",className:"flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm text-primary outline-none focus:ring-1 focus:ring-primary/20"}),(0,b.jsx)(k.Button,{type:"submit",disabled:!h.trim()||j,className:"text-blue-500 font-bold hover:text-blue-600 disabled:opacity-50 p-2 h-auto",variant:"ghost",children:"Post"})]})})]})]}):null}var p=a.i(53131);function q({id:a,title:n,author:q,xp:r,mediaUrl:s,mediaType:t,initialLikes:u=0,initialIsLiked:v=!1,initialComments:w=[],isActive:x=!0,isGlobalMuted:y=!0,onToggleGlobalMute:z,creatorId:A}){let[B,C]=(0,m.useState)(u),[D,E]=(0,m.useState)(w.length),[F,G]=(0,m.useState)(0),[H,I]=(0,m.useState)(v),[J,K]=(0,m.useState)(!1),[L,M]=(0,m.useState)(!1),[N,O]=(0,m.useState)(!1),P=(0,m.useRef)(null),{user:Q}=(0,p.useAuth)(),R=(0,m.useRef)(!1);(0,m.useEffect)(()=>{x&&!R.current&&a&&(fetch(`/api/hypes/${a}/view`,{method:"POST"}).catch(console.error),R.current=!0)},[x,a]),(0,m.useEffect)(()=>{if(P.current)if(x&&!L){let a=P.current.play();void 0!==a&&a.catch(a=>{console.log("Autoplay prevented:",a)})}else P.current.pause()},[x,L]);let S=async()=>{if(!Q)return void alert("Please login to like");let b=!H;I(b),C(a=>b?a+1:a-1);try{await fetch(`/api/hypes/${a}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Q.id})})}catch(a){I(!b),C(a=>b?a-1:a+1)}},T=async()=>{G(a=>a+1);let b=`${window.location.origin}/hypes/${a}`;try{await navigator.clipboard.writeText(b),alert("Link copied to clipboard!")}catch(a){console.error("Failed to copy link:",a)}},U=async()=>{if(!Q)return void alert("Please login to subscribe");if(!A){console.error("Follow failed: No creatorId found for this hype"),alert("Cannot follow: Creator information is missing for this Hype.");return}O(a=>!a);try{let a=await fetch(`/api/users/${A}/follow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentUserId:Q.id})}),b=await a.json();void 0!==b.isFollowing&&O(b.isFollowing)}catch(a){console.error("Follow error:",a),O(a=>!a)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"relative h-[90vh] aspect-[9/16] snap-center shrink-0 rounded-2xl overflow-hidden bg-primary mb-8 mx-auto",children:[(0,b.jsxs)("div",{className:"absolute inset-0 z-0",children:["video"===t?(0,b.jsx)("video",{src:s,className:"w-full h-full object-cover blur-xl opacity-50 scale-110",loop:!0,muted:!0,playsInline:!0}):(0,b.jsx)("img",{src:s,alt:n,className:"w-full h-full object-cover blur-xl opacity-50 scale-110"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/40"})]}),(0,b.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center z-10 cursor-pointer",onClick:()=>{M(a=>!a)},children:["video"===t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("video",{ref:P,src:s,className:"w-full h-full object-contain",loop:!0,muted:y,playsInline:!0}),(!x||L)&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-primary/20 z-20",children:(0,b.jsx)(j.Play,{className:"w-16 h-16 text-white opacity-50"})}),(0,b.jsx)("div",{className:"absolute bottom-4 right-4 p-2 bg-primary/50 rounded-full text-white z-30 cursor-pointer hover:bg-primary/70 transition-colors",onClick:a=>{a.stopPropagation(),z?z():P.current&&(P.current.muted=!P.current.muted)},children:y?(0,b.jsx)(i.VolumeX,{className:"w-4 h-4"}):(0,b.jsx)(h.Volume2,{className:"w-4 h-4"})})]}):(0,b.jsx)("img",{src:s,alt:n,className:"w-full h-full object-contain"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/20 via-transparent to-primary/80 pointer-events-none"})]}),(0,b.jsxs)("div",{className:"absolute right-4 bottom-20 flex flex-col items-center gap-6 z-30",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,b.jsx)(k.Button,{size:"icon",variant:"ghost",onClick:S,className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,b.jsx)(c.Heart,{className:`w-6 h-6 ${H?"fill-red-500 text-red-500":""}`})}),(0,b.jsx)("span",{className:"text-xs font-bold text-white",children:B})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,b.jsx)(k.Button,{size:"icon",variant:"ghost",onClick:()=>{K(!0)},className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,b.jsx)(d.MessageCircle,{className:"w-6 h-6"})}),(0,b.jsx)("span",{className:"text-xs font-bold text-white",children:D})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,b.jsx)(k.Button,{size:"icon",variant:"ghost",onClick:T,className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,b.jsx)(e.Share2,{className:"w-6 h-6"})}),(0,b.jsx)("span",{className:"text-xs font-bold text-white",children:F})]}),(0,b.jsx)(k.Button,{size:"icon",variant:"ghost",className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,b.jsx)(f.MoreVertical,{className:"w-6 h-6"})})]}),(0,b.jsxs)("div",{className:"absolute left-0 bottom-0 right-16 p-6 z-30 text-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-teal-400 to-blue-500 p-[2px]",children:(0,b.jsx)("div",{className:"w-full h-full rounded-full bg-primary flex items-center justify-center font-bold text-sm",children:q[0]})}),(0,b.jsx)(l.default,{href:A?`/users/${A}`:"#",className:"hover:underline",children:(0,b.jsx)("span",{className:"font-bold text-lg",children:q})}),(0,b.jsx)(k.Button,{variant:N?"secondary":"outline",size:"sm",className:`h-7 ml-2 rounded-full px-4 ${N?"bg-white text-primary":"border-white/30 bg-white/10 hover:bg-white/20 text-white"}`,onClick:U,children:N?"Following":"Follow"})]}),(0,b.jsx)("h2",{className:"text-lg font-medium line-clamp-2 mb-2",children:n}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-90",children:[(0,b.jsx)(g,{className:"w-4 h-4"}),(0,b.jsx)("div",{className:"overflow-hidden w-40",children:(0,b.jsxs)("div",{className:"animate-marquee whitespace-nowrap",children:["Original Sound - ",q," â€¢ Trending Hype Track"]})})]})]})]}),(0,b.jsx)(o,{isOpen:J,onClose:()=>K(!1),hypeId:a,initialComments:w})]})}a.s(["default",()=>q],11430)}];

//# sourceMappingURL=_f3a5a063._.js.map