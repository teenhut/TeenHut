module.exports=[65810,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(72131),e=a.i(11430),f=a.i(89986),g=a.i(40695),h=a.i(73320),i=a.i(53131);function j({initialHypeId:a}){let[c,j]=(0,d.useState)([]),[k,l]=(0,d.useState)(!1),[m,n]=(0,d.useState)(a||null),[o,p]=(0,d.useState)(!0),q=(0,d.useRef)(null),r=(0,d.useRef)(null),{user:s}=(0,i.useAuth)(),[t,u]=(0,d.useState)(!1);(0,d.useEffect)(()=>{v()},[s]);let v=async()=>{try{let a=await fetch(`/api/hypes?userId=${s?.id||""}`);if(a.ok){let b=await a.json();j(b),b.length>0&&!m&&n(b[0]._id)}}catch(a){console.error("Failed to fetch hypes",a)}};(0,d.useEffect)(()=>{if(a&&c.length>0&&!t&&r.current){let b=r.current.querySelector(`[data-id="${a}"]`);b&&(b.scrollIntoView({behavior:"auto"}),u(!0),n(a))}},[a,c,t]),(0,d.useEffect)(()=>{if(0===c.length)return;q.current=new IntersectionObserver(a=>{a.forEach(a=>{if(a.isIntersecting){let b=a.target.getAttribute("data-id");b&&b!==m&&(n(b),window.history.replaceState(null,"",`/hypes/${b}`))}})},{root:r.current,rootMargin:"0px",threshold:.6});let a=r.current?.querySelectorAll(".hype-card");return a?.forEach(a=>{q.current?.observe(a)}),()=>{q.current&&q.current.disconnect()}},[c,m]);let w=()=>{p(a=>!a)};return(0,b.jsxs)("div",{className:"h-screen bg-white text-primary font-sans overflow-hidden flex flex-col items-center relative",children:[(0,b.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-white/80 to-transparent",children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Hypes"}),(0,b.jsx)(g.Button,{onClick:()=>l(!0),size:"icon",className:"bg-primary/10 hover:bg-primary/20 text-primary backdrop-blur-md rounded-full w-10 h-10",children:(0,b.jsx)(h.Upload,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{ref:r,className:"w-full max-w-md h-full overflow-y-scroll snap-y snap-mandatory scrollbar-hide pt-16",children:0===c.length?(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 opacity-60",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)(h.Upload,{className:"w-10 h-10"})}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-2",children:"No Hypes Yet"}),(0,b.jsx)("p",{className:"mb-6",children:"Be the first to upload a hype!"}),(0,b.jsx)(g.Button,{onClick:()=>l(!0),className:"bg-primary text-white hover:bg-primary/90 font-bold rounded-full px-8",children:"Create Hype"})]}):c.map(a=>(0,b.jsx)("div",{className:"hype-card snap-center","data-id":a._id,children:(0,b.jsx)(e.default,{id:a._id,title:a.title,author:a.author,xp:a.xp,mediaUrl:a.mediaUrl,mediaType:a.mediaType,initialLikes:a.likes,initialIsLiked:a.isLiked,initialComments:a.comments,isActive:a._id===m,isGlobalMuted:o,onToggleGlobalMute:w,creatorId:a.creatorId})},a._id))}),(0,b.jsx)(f.default,{isOpen:k,onClose:()=>l(!1),onUploadSuccess:v})]})}function k(){let{id:a}=(0,c.useParams)();return(0,b.jsx)("main",{children:(0,b.jsx)(j,{initialHypeId:a})})}a.s(["default",()=>k],65810)}];

//# sourceMappingURL=app_hypes_%5Bid%5D_page_tsx_38910951._.js.map