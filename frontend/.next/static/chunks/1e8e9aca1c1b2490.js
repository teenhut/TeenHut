(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90597,e=>{"use strict";let t=(0,e.i(75254).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>t],90597)},94983,e=>{"use strict";let t=(0,e.i(75254).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>t],94983)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},69074,69638,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>s],69074);let l=(0,t.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>l],69638)},84431,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(67881),a=e.i(69074),r=e.i(37727),i=e.i(69638),n=e.i(97815);function o({isOpen:e,onClose:o,onUploadSuccess:c}){let{user:d}=(0,n.useAuth)(),[u,h]=(0,s.useState)(1),[m,x]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null),[y,b]=(0,s.useState)(null),[g,v]=(0,s.useState)(""),[j,w]=(0,s.useState)(""),[N,k]=(0,s.useState)(!1),S=(0,s.useRef)(null);if(!e)return null;let C=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},T=e=>{f(e);let t=new FileReader;t.onloadend=()=>{b(t.result),h(2)},t.readAsDataURL(e)},z=async()=>{if(!p||!g)return;k(!0);let e=new FormData;e.append("file",p),e.append("title",g),e.append("author",d?.username||"Anonymous"),e.append("userId",d?.id||"");try{(await fetch("/api/hypes",{method:"POST",body:e})).ok?(c(),A()):alert("Upload failed. Please try again.")}catch(e){console.error("Upload error:",e),alert("An error occurred during upload.")}finally{k(!1)}},A=()=>{h(1),f(null),b(null),v(""),w(""),k(!1),o()};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white text-primary rounded-xl w-full max-w-4xl h-[80vh] flex flex-col shadow-2xl overflow-hidden relative border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:1===u?"Upload videos":`${g||"Draft"}`}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:A,className:"text-gray-500 hover:text-primary hover:bg-gray-100",children:(0,t.jsx)(r.X,{className:"w-6 h-6"})})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-0",children:1===u?(0,t.jsxs)("div",{className:`h-full flex flex-col items-center justify-center p-12 transition-colors ${m?"bg-gray-50":"bg-white"}`,onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:e=>{e.preventDefault(),e.stopPropagation(),x(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&T(e.dataTransfer.files[0])},children:[(0,t.jsx)("div",{className:"w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(a.Upload,{className:"w-16 h-16 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Drag and drop video files to upload"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mb-8",children:"Your videos will be private until you publish them."}),(0,t.jsx)(l.Button,{onClick:()=>S.current?.click(),className:"bg-primary hover:bg-primary/90 text-white font-bold px-6 py-2 rounded-sm uppercase text-sm",children:"Select Files"}),(0,t.jsx)("input",{ref:S,type:"file",className:"hidden",accept:"image/*,video/*",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&T(e.target.files[0])}})]}):(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row h-full",children:[(0,t.jsxs)("div",{className:"flex-1 p-8 space-y-6 overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Details"}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus-within:border-primary transition-colors",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"Title (required)"}),(0,t.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),className:"w-full bg-transparent border-none outline-none text-primary placeholder-gray-400",placeholder:"Add a title that describes your video"})]})}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus-within:border-primary transition-colors h-40",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:j,onChange:e=>w(e.target.value),className:"w-full h-full bg-transparent border-none outline-none text-primary placeholder-gray-400 resize-none",placeholder:"Tell viewers about your video"})]})})]}),(0,t.jsxs)("div",{className:"w-full lg:w-1/3 bg-gray-50 p-6 border-l border-gray-200 flex flex-col",children:[(0,t.jsx)("div",{className:"aspect-9/16 bg-black rounded-lg overflow-hidden mb-4 relative shadow-md",children:y?p?.type.startsWith("video")?(0,t.jsx)("video",{src:y,controls:!0,className:"w-full h-full object-contain"}):(0,t.jsx)("img",{src:y,alt:"Preview",className:"w-full h-full object-contain"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Generating preview..."})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,t.jsx)("span",{children:"Video Link"}),(0,t.jsx)("span",{className:"text-blue-600 cursor-pointer",children:"https://teenhut.com/v/..."})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,t.jsx)("span",{children:"Filename"}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:p?.name})]})]})]})]})}),2===u&&(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.CheckCircle,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Checks complete. No issues found."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",onClick:()=>h(1),className:"text-gray-600 hover:text-primary hover:bg-gray-200",children:"Back"}),(0,t.jsx)(l.Button,{onClick:z,disabled:N||!g,className:"bg-primary hover:bg-primary/90 text-white font-bold px-6 rounded-sm uppercase text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Uploading...":"Publish"})]})]})]})})}e.s(["default",()=>o])},62031,e=>{"use strict";let t=(0,e.i(75254).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>t],62031)},23585,e=>{"use strict";let t=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},82373,35116,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);e.s(["Volume2",()=>s],82373);let l=(0,t.default)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);e.s(["VolumeX",()=>l],35116)},51311,e=>{"use strict";var t=e.i(43476),s=e.i(90597),l=e.i(94983),a=e.i(62031),r=e.i(23585);let i=(0,e.i(75254).default)("music-2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);var n=e.i(82373),o=e.i(35116),c=e.i(31343),d=e.i(67881),u=e.i(22016),h=e.i(71645),m=e.i(37727);function x({isOpen:e,onClose:s,hypeId:l,initialComments:a=[]}){let[r,i]=(0,h.useState)(a),[n,o]=(0,h.useState)(""),[c,u]=(0,h.useState)(!1),x=(0,h.useRef)(null);(0,h.useEffect)(()=>{e&&(p(),setTimeout(()=>x.current?.focus(),100))},[e,l]);let p=async()=>{try{let e=await fetch(`/api/hypes/${l}/comments`);if(e.ok){let t=await e.json();i(t)}}catch(e){console.error("Failed to fetch comments")}},f=async e=>{if(e.preventDefault(),n.trim()){u(!0);try{console.log("Posting comment to:",`/api/hypes/${l}/comment`);let e=await fetch(`/api/hypes/${l}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n,author:"You"})});if(e.ok){let t=await e.json();i(e=>[t,...e]),o("")}else console.error("Failed to post comment, status:",e.status),alert("Failed to post comment. Please try again.")}catch(e){console.error("Failed to post comment:",e),alert("An error occurred. Please check your connection.")}finally{u(!1)}}};return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-t-2xl sm:rounded-2xl h-[70vh] flex flex-col shadow-2xl animate-in slide-in-from-bottom duration-300",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center p-4 border-b border-gray-100 relative",children:[(0,t.jsx)("div",{className:"w-12 h-1 bg-gray-300 rounded-full absolute top-2"}),(0,t.jsx)("h3",{className:"font-bold text-primary mt-2",children:"Comments"}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",className:"absolute right-2 top-2 text-gray-500 hover:text-primary",onClick:s,children:(0,t.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===r.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm",children:[(0,t.jsx)("p",{children:"No comments yet."}),(0,t.jsx)("p",{children:"Start the conversation!"})]}):r.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-teal-400 to-blue-500 p-[2px] shrink-0",children:(0,t.jsx)("div",{className:"w-full h-full rounded-full bg-white flex items-center justify-center font-bold text-xs text-primary",children:e.author[0]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"font-bold text-sm text-primary",children:e.author}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("p",{className:"text-sm text-gray-800",children:e.text})]})]},s))}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-100 bg-white pb-6 sm:pb-4",children:(0,t.jsxs)("form",{onSubmit:f,className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-bold text-xs text-gray-500 shrink-0",children:"Y"}),(0,t.jsx)("input",{ref:x,type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Add a comment...",className:"flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm text-primary outline-none focus:ring-1 focus:ring-primary/20"}),(0,t.jsx)(d.Button,{type:"submit",disabled:!n.trim()||c,className:"text-blue-500 font-bold hover:text-blue-600 disabled:opacity-50 p-2 h-auto",variant:"ghost",children:"Post"})]})})]})]}):null}var p=e.i(97815);function f({id:e,title:m,author:f,xp:y,mediaUrl:b,mediaType:g,initialLikes:v=0,initialIsLiked:j=!1,initialComments:w=[],isActive:N=!0,isGlobalMuted:k=!0,onToggleGlobalMute:S,creatorId:C}){let[T,z]=(0,h.useState)(v),[A,P]=(0,h.useState)(w.length),[F,M]=(0,h.useState)(0),[B,D]=(0,h.useState)(j),[$,I]=(0,h.useState)(!1),[O,U]=(0,h.useState)(!1),[L,H]=(0,h.useState)(!1),q=(0,h.useRef)(null),{user:R}=(0,p.useAuth)(),E=(0,h.useRef)(!1);(0,h.useEffect)(()=>{N&&!E.current&&e&&(fetch(`/api/hypes/${e}/view`,{method:"POST"}).catch(console.error),E.current=!0)},[N,e]),(0,h.useEffect)(()=>{if(q.current)if(N&&!O){let e=q.current.play();void 0!==e&&e.catch(e=>{console.log("Autoplay prevented:",e)})}else q.current.pause()},[N,O]);let V=async()=>{if(!R)return void alert("Please login to like");let t=!B;D(t),z(e=>t?e+1:e-1);try{await fetch(`/api/hypes/${e}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:R.id})})}catch(e){D(!t),z(e=>t?e-1:e+1)}},X=async()=>{M(e=>e+1);let t=`${window.location.origin}/hypes/${e}`;try{await navigator.clipboard.writeText(t),alert("Link copied to clipboard!")}catch(e){console.error("Failed to copy link:",e)}},_=async()=>{if(!R)return void alert("Please login to subscribe");if(!C){console.error("Follow failed: No creatorId found for this hype"),alert("Cannot follow: Creator information is missing for this Hype.");return}H(e=>!e);try{let e=await fetch(`/api/users/${C}/follow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentUserId:R.id})}),t=await e.json();void 0!==t.isFollowing&&H(t.isFollowing)}catch(e){console.error("Follow error:",e),H(e=>!e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative h-[90vh] aspect-[9/16] snap-center shrink-0 rounded-2xl overflow-hidden bg-primary mb-8 mx-auto",children:[(0,t.jsxs)("div",{className:"absolute inset-0 z-0",children:["video"===g?(0,t.jsx)("video",{src:b,className:"w-full h-full object-cover blur-xl opacity-50 scale-110",loop:!0,muted:!0,playsInline:!0}):(0,t.jsx)("img",{src:b,alt:m,className:"w-full h-full object-cover blur-xl opacity-50 scale-110"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/40"})]}),(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center z-10 cursor-pointer",onClick:()=>{U(e=>!e)},children:["video"===g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("video",{ref:q,src:b,className:"w-full h-full object-contain",loop:!0,muted:k,playsInline:!0}),(!N||O)&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-primary/20 z-20",children:(0,t.jsx)(c.Play,{className:"w-16 h-16 text-white opacity-50"})}),(0,t.jsx)("div",{className:"absolute bottom-4 right-4 p-2 bg-primary/50 rounded-full text-white z-30 cursor-pointer hover:bg-primary/70 transition-colors",onClick:e=>{e.stopPropagation(),S?S():q.current&&(q.current.muted=!q.current.muted)},children:k?(0,t.jsx)(o.VolumeX,{className:"w-4 h-4"}):(0,t.jsx)(n.Volume2,{className:"w-4 h-4"})})]}):(0,t.jsx)("img",{src:b,alt:m,className:"w-full h-full object-contain"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/20 via-transparent to-primary/80 pointer-events-none"})]}),(0,t.jsxs)("div",{className:"absolute right-4 bottom-20 flex flex-col items-center gap-6 z-30",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)(d.Button,{size:"icon",variant:"ghost",onClick:V,className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,t.jsx)(s.Heart,{className:`w-6 h-6 ${B?"fill-red-500 text-red-500":""}`})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:T})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)(d.Button,{size:"icon",variant:"ghost",onClick:()=>{I(!0)},className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,t.jsx)(l.MessageCircle,{className:"w-6 h-6"})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:A})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)(d.Button,{size:"icon",variant:"ghost",onClick:X,className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,t.jsx)(a.Share2,{className:"w-6 h-6"})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:F})]}),(0,t.jsx)(d.Button,{size:"icon",variant:"ghost",className:"w-12 h-12 rounded-full bg-primary/40 hover:bg-white/20 text-white backdrop-blur-sm",children:(0,t.jsx)(r.MoreVertical,{className:"w-6 h-6"})})]}),(0,t.jsxs)("div",{className:"absolute left-0 bottom-0 right-16 p-6 z-30 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-teal-400 to-blue-500 p-[2px]",children:(0,t.jsx)("div",{className:"w-full h-full rounded-full bg-primary flex items-center justify-center font-bold text-sm",children:f[0]})}),(0,t.jsx)(u.default,{href:C?`/users/${C}`:"#",className:"hover:underline",children:(0,t.jsx)("span",{className:"font-bold text-lg",children:f})}),(0,t.jsx)(d.Button,{variant:L?"secondary":"outline",size:"sm",className:`h-7 ml-2 rounded-full px-4 ${L?"bg-white text-primary":"border-white/30 bg-white/10 hover:bg-white/20 text-white"}`,onClick:_,children:L?"Following":"Follow"})]}),(0,t.jsx)("h2",{className:"text-lg font-medium line-clamp-2 mb-2",children:m}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-90",children:[(0,t.jsx)(i,{className:"w-4 h-4"}),(0,t.jsx)("div",{className:"overflow-hidden w-40",children:(0,t.jsxs)("div",{className:"animate-marquee whitespace-nowrap",children:["Original Sound - ",f," â€¢ Trending Hype Track"]})})]})]})]}),(0,t.jsx)(x,{isOpen:$,onClose:()=>I(!1),hypeId:e,initialComments:w})]})}e.s(["default",()=>f],51311)},52062,e=>{"use strict";var t=e.i(43476),s=e.i(18566),l=e.i(71645),a=e.i(51311),r=e.i(84431),i=e.i(67881),n=e.i(69074),o=e.i(97815);function c({initialHypeId:e}){let[s,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(!1),[h,m]=(0,l.useState)(e||null),[x,p]=(0,l.useState)(!0),f=(0,l.useRef)(null),y=(0,l.useRef)(null),{user:b}=(0,o.useAuth)(),[g,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{j()},[b]);let j=async()=>{try{let e=await fetch(`/api/hypes?userId=${b?.id||""}`);if(e.ok){let t=await e.json();c(t),t.length>0&&!h&&m(t[0]._id)}}catch(e){console.error("Failed to fetch hypes",e)}};(0,l.useEffect)(()=>{if(e&&s.length>0&&!g&&y.current){let t=y.current.querySelector(`[data-id="${e}"]`);t&&(t.scrollIntoView({behavior:"auto"}),v(!0),m(e))}},[e,s,g]),(0,l.useEffect)(()=>{if(0===s.length)return;f.current=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let t=e.target.getAttribute("data-id");t&&t!==h&&(m(t),window.history.replaceState(null,"",`/hypes/${t}`))}})},{root:y.current,rootMargin:"0px",threshold:.6});let e=y.current?.querySelectorAll(".hype-card");return e?.forEach(e=>{f.current?.observe(e)}),()=>{f.current&&f.current.disconnect()}},[s,h]);let w=()=>{p(e=>!e)};return(0,t.jsxs)("div",{className:"h-screen bg-white text-primary font-sans overflow-hidden flex flex-col items-center relative",children:[(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-white/80 to-transparent",children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"Hypes"}),(0,t.jsx)(i.Button,{onClick:()=>u(!0),size:"icon",className:"bg-primary/10 hover:bg-primary/20 text-primary backdrop-blur-md rounded-full w-10 h-10",children:(0,t.jsx)(n.Upload,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{ref:y,className:"w-full max-w-md h-full overflow-y-scroll snap-y snap-mandatory scrollbar-hide pt-16",children:0===s.length?(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 opacity-60",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(n.Upload,{className:"w-10 h-10"})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-2",children:"No Hypes Yet"}),(0,t.jsx)("p",{className:"mb-6",children:"Be the first to upload a hype!"}),(0,t.jsx)(i.Button,{onClick:()=>u(!0),className:"bg-primary text-white hover:bg-primary/90 font-bold rounded-full px-8",children:"Create Hype"})]}):s.map(e=>(0,t.jsx)("div",{className:"hype-card snap-center","data-id":e._id,children:(0,t.jsx)(a.default,{id:e._id,title:e.title,author:e.author,xp:e.xp,mediaUrl:e.mediaUrl,mediaType:e.mediaType,initialLikes:e.likes,initialIsLiked:e.isLiked,initialComments:e.comments,isActive:e._id===h,isGlobalMuted:x,onToggleGlobalMute:w,creatorId:e.creatorId})},e._id))}),(0,t.jsx)(r.default,{isOpen:d,onClose:()=>u(!1),onUploadSuccess:j})]})}function d(){let{id:e}=(0,s.useParams)();return(0,t.jsx)("main",{children:(0,t.jsx)(c,{initialHypeId:e})})}e.s(["default",()=>d],52062)}]);